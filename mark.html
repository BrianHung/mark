<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Mark</title>

        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:400">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css">
        <script src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js"></script>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.48.2/lib/codemirror.css">
        <script src="https://cdn.jsdelivr.net/npm/codemirror@5.48.2/lib/codemirror.min.js"></script>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.48.2/addon/display/fullscreen.min.css">
        <script src="https://cdn.jsdelivr.net/npm/codemirror@5.48.2/addon/display/fullscreen.min.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/codemirror@5.48.2/addon/mode/overlay.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/codemirror@5.48.2/mode/markdown/markdown.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/codemirror@5.48.2/mode/gfm/gfm.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/codemirror@5.48.2/mode/javascript/javascript.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/codemirror@5.48.2/mode/python/python.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/highlightjs@9.12.0/highlight.pack.min.js"></script>
        <script>hljs.initHighlightingOnLoad()</script>

        <script src="markdown.js"></script>
        <script>const markdown = window.markdown</script>

        <link rel="stylesheet" href="mark.css">
        <script src="mark.js"></script>

    </head>

    <body>
        <div class="footer">
            <div style="position: fixed; left: 0px; margin-left: 16px; bottom: 16px;">
                <div style="position: relative;">
                    <div class="menu menu-file" tabindex="-1" style="left: 0;">
                        <h3 class="menu-head">File</h3>
                        <ul class="menu-list">
                            <li class="list-line"><hr></li>
                            <li></li>
                            <li class="list-line"><hr></li>
                            <li></li>
                            <li></li>
                            <li class="list-line"><hr></li>
                        </ul>
                    </div>
                </div>
                <div style="float: right;">
                    <svg class="icon icon-file" viewBox="0 0 32 32" fill="currentColor" stroke="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" width="32" height="32">
                        <circle r="2.0" cx=" 8" cy="16"></circle>
                        <circle r="2.0" cx="16" cy="16"></circle>
                        <circle r="2.0" cx="24" cy="16"></circle>
                    </svg>
                </div>
            </div>
            <div style="position: fixed; right: 0px; margin-right: 16px; bottom: 16px;">
                <div style="position: relative;">
                    <div class="menu menu-help" tabindex="-1">
                        <h3 class="menu-head">Shortcuts</h3>
                        <ul class="menu-list">
                            <li>
                                <span>edit cell</span>
                                <span class="list-right"><code>enter</code></span>
                            </li>
                            <li>
                                <span>add/render cell</span>
                                <span class="list-right"><code>shift</code>+<code>enter</code></span>
                            </li>
                            <li>
                                <span>delete cell</span>
                                <span class="list-right"><code>shift</code>+<code>bkspc</code></span>
                            </li>
                            <li>
                                <span>focus above/below</span>
                                <span class="list-right"><code>up</code>/<code>down</code></span>
                            </li>
                        </ul>
                        <h3 class="menu-head">Markdown</h3>
                        <ul class="menu-list">
                            <li class="list-line"><hr></li>
                            <li>
                                <span><em>Italics</em></span>
                                <span class="list-right">_italics_</span>
                            </li>
                            <li>
                                <span><strong>Bold</strong></span>
                                <span class="list-right">**bold**</span>
                            </li>
                            <li>
                                <span><s>Strikethrough</s></span>
                                <span class="list-right">~~strike~~</span>
                            </li>
                            <li>
                                <span><mark>Mark</mark></span>
                                <span class="list-right">==mark==</span>
                            </li>
                            <li>
                                <span><code>Code</code></span>
                                <span class="list-right">`code`, ```</span>
                            </li>
                            <li>
                                <span><blockquote>quote</blockquote></span>
                                <span class="list-right">> quote</span>
                            </li>
                            <li>
                                <span>Divider</span>
                                <span class="list-right">---</span>
                            </li>
                            <li>
                                <span style="font-family: KaTeX_Main; font-size: 15.488px;">
                                    <span style="line-height: 18.6584px;">L</span><span style="font-size: 0.75em; margin: 0px 0px 0px -0.32em; position: relative; top: -0.2em;">A</span><span style="margin: 0px 0px 0px -0.23em; line-height: 18.6584px;">T</span><span style="margin: 0px 0px 0px -0.1667em; line-height: 18.6584px; position: relative; top: 0.2155em;">E</span><span style="margin: 0px 0px 0px -0.125em; line-height: 18.6584px;">X</span>
                                </span>
                                <span class="list-right">$x^2$, $$</span>
                            </li>
                            <li class="list-line"><hr></li>
                        </ul>
                    </div>
                    <div class="menu menu-main" tabindex="-1">
                        <h3 class="menu-head">Menu</h3>
                        <ul class="menu-list">
                            <li class="list-line"><hr></li>
                            <li>
                                <div class="button-div g-signin2" data-onsuccess="onSignIn">
                                    <button class="button customGPlusSignIn" type="button">
                                        <span class="button-icon">
                                            <svg width="25" height="25">
                                                <g fill="none" fill-rule="evenodd">
                                                    <path d="M20.66 12.693c0-.603-.054-1.182-.155-1.738H12.5v3.287h4.575a3.91 3.91 0 0 1-1.697 2.566v2.133h2.747c1.608-1.48 2.535-3.65 2.535-6.24z" fill="#4285F4"></path><path d="M12.5 21c2.295 0 4.22-.76 5.625-2.06l-2.747-2.132c-.76.51-1.734.81-2.878.81-2.214 0-4.088-1.494-4.756-3.503h-2.84v2.202A8.498 8.498 0 0 0 12.5 21z" fill="#34A853"></path><path d="M7.744 14.115c-.17-.51-.267-1.055-.267-1.615s.097-1.105.267-1.615V8.683h-2.84A8.488 8.488 0 0 0 4 12.5c0 1.372.328 2.67.904 3.817l2.84-2.202z" fill="#FBBC05"></path>
                                                    <path d="M12.5 7.38c1.248 0 2.368.43 3.25 1.272l2.437-2.438C16.715 4.842 14.79 4 12.5 4a8.497 8.497 0 0 0-7.596 4.683l2.84 2.202c.668-2.01 2.542-3.504 4.756-3.504z" fill="#EA4335"></path>
                                                </g>
                                            </svg>
                                        </span>
                                        <span class="button-text">Sign in with Google</span>
                                    </button>
                                </div>
                            </li>
                            <li class="list-line"><hr></li>
                            <li><button class="button-hidden" onclick="downloadJson()">Download as JSON    </button></li>
                            <li><button class="button-hidden" onclick="downloadMark()">Download as Markdown</button></li>
                            <li class="list-line"><hr></li>
                        </ul>
                    </div>
                </div>
                <div style="float: right;">
                    <svg class="icon icon-help" viewBox="0 0 32 32"><path d="M4 11c0-1.65 1.29-3 2.867-3h17.266C25.72 8 27 9.344 27 11v10c0 1.652-1.29 3-2.867 3H6.867C5.28 24 4 22.656 4 21V11zm2 10c0 .555.422 1 .942 1h17.116c.51 0 .942-.448.942-1V11c0-.555-.422-1-.942-1H6.942c-.51 0-.942.448-.942 1v10zm2-5.8c0-.11.086-.2.2-.2h1.6c.11 0 .2.086.2.2v1.6c0 .11-.086.2-.2.2H8.2c-.11 0-.2-.086-.2-.2v-1.6zm14-3c0-.11.086-.2.2-.2h1.6c.11 0 .2.086.2.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6zm-3 0c0-.11.086-.2.2-.2h1.6c.11 0 .2.086.2.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6zm-3 0c0-.11.086-.2.2-.2h1.6c.11 0 .2.086.2.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6zm-3 0c0-.11.086-.2.2-.2h1.6c.11 0 .2.086.2.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6zm-6 0c0-.11.086-.2.2-.2h1.6c.11 0 .2.086.2.2v1.6c0 .11-.086.2-.2.2H7.2c-.11 0-.2-.086-.2-.2v-1.6zm3 0c0-.11.086-.2.2-.2h1.6c.11 0 .2.086.2.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6zm1 3c0-.11.086-.2.2-.2h1.6c.11 0 .2.086.2.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6zm3 0c0-.11.086-.2.2-.2h1.6c.11 0 .2.086.2.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6zm3 0c0-.11.086-.2.2-.2h1.6c.11 0 .2.086.2.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6zm3 0c0-.11.086-.2.2-.2h1.6c.11 0 .2.086.2.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6zm-13 3c0-.11.086-.2.2-.2h1.6c.11 0 .2.086.2.2v1.6c0 .11-.086.2-.2.2H7.2c-.11 0-.2-.086-.2-.2v-1.6zm15 0c0-.11.086-.2.2-.2h1.6c.11 0 .2.086.2.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6zm-12 0c0-.11.095-.2.19-.2h10.62c.105 0 .19.086.19.2v1.6c0 .11-.095.2-.19.2H10.19a.193.193 0 0 1-.19-.2v-1.6z"></path></svg>
                    <svg class="icon icon-main" viewBox="0 0 32 32"><path d="M5 16C5 9.925 9.924 5 16 5c6.075 0 11 4.924 11 11 0 6.075-4.924 11-11 11-6.075 0-11-4.924-11-11zm1.913 0A9.086 9.086 0 0 0 16 25.087 9.086 9.086 0 0 0 25.087 16 9.086 9.086 0 0 0 16 6.913 9.086 9.086 0 0 0 6.913 16zm10.042 5.26h-2.076v-1.874h2.076v1.875zm.656-7.82c0-.83-.563-1.406-1.513-1.406-1.032 0-1.768.616-1.755 2.09h-1.727c-.04-2.09 1.259-3.536 3.495-3.536 2.303 0 3.267 1.299 3.267 2.759 0 1.285-.589 1.955-1.406 2.638l-.763.63c-.375.307-.495.428-.495.896v.603h-1.58v-.857c0-.857.187-1.058.897-1.66l.723-.603c.535-.442.857-.844.857-1.554z" fill-rule="evenodd"></path></svg>
                </div>
            </div>
        </div>
        <script>
        const iconFile = document.querySelector(".icon-file")
        const iconHelp = document.querySelector(".icon-help")
        const iconMain = document.querySelector(".icon-main")
        const menuFile = document.querySelector(".menu-file")
        const menuHelp = document.querySelector(".menu-help")
        const menuMain = document.querySelector(".menu-main")
        iconFile.addEventListener("click", function(event) {
            menuFile.focus()
        })
        iconHelp.addEventListener("click", function(event) {
            menuHelp.focus()
        })
        iconMain.addEventListener("click", function(event) {
            menuMain.focus()
        })
        </script>
        <script>EventListener(document.body)</script>
        <script src="https://apis.google.com/js/api:client.js?onload=initClient" async defer></script>

        <script>

            // The Browser API key obtained from the Google API Console.
            var apiKey = "AIzaSyCVoUn8BeFWqDN8oUkdSfb3O71ZkNvwS8s"
            // The Client ID obtained from the Google API Console.
            var clientId = "619548834976-ushntjb1m19qitj99mgbv5hnk3fbpcln.apps.googleusercontent.com"

            var pickerApiLoaded = false
            var oauthToken

            function initClient() {

                gapi.load('auth2', function(){
                    auth2 = gapi.auth2.init({
                        client_id: clientId,
                        cookiepolicy: 'single_host_origin',
                        fetch_basic_profile: true,
                        scope: "https://www.googleapis.com/auth/drive",
                        ux_mode: "redirect",
                    }).then(function(googleAuth) {
                        console.log(googleAuth)
                        googleAuth.signIn().then(function(result) {
                            let authResult = result.getAuthResponse()
                            handleAuthResult(authResult)
                        })
                    })
                    auth2.attachClickHandler(document.querySelector(".button"), {},
                        function(googleUser) {
                            user = googleUser
                        },
                        function(error) {
                            console.log(JSON.stringify(error, undefined, 2));
                        },
                    )
                })

                gapi.load('picker', function() {
                    pickerApiLoaded = true
                    createPicker()
                })

                function handleAuthResult(authResult) {
                    if (authResult && !authResult.error) {
                      oauthToken = authResult.access_token
                      createPicker();
                  }
                }
                // Create and render a Picker object for picking user Photos.
                 function createPicker() {
                     if (pickerApiLoaded && oauthToken) {
                         var picker = new google.picker.PickerBuilder().
                         addView(google.picker.ViewId.PHOTOS).
                         setOAuthToken(oauthToken).
                         setDeveloperKey(developerKey).
                         setCallback(pickerCallback).
                         build();
                     picker.setVisible(true);
                   }
                 }

                 // A simple callback implementation.
                 function pickerCallback(data) {
                     var url = 'nothing';
                     if (data[google.picker.Response.ACTION] == google.picker.Action.PICKED) {
                         var doc = data[google.picker.Response.DOCUMENTS][0];
                         url = doc[google.picker.Document.URL];
                     }
                     var message = 'You picked: ' + url;
                     console.log(message)
                 }
            }
        </script>

    </body>
</html>
